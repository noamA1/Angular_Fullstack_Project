<div class="container">
    <mat-accordion class="example-headers-align " style="font-family: 'Josefin Sans', sans-serif;">
        <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Personal data
                </mat-panel-title>
                <mat-panel-description>
                    Type your information and password
                    <mat-icon>account_circle</mat-icon>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <form [formGroup]="registerForm" class="form">
                <mat-form-field class="form__field" appearance="standard">
                    <mat-label>Enter user ID</mat-label>
                    <input matInput formControlName="userId" required>
                    <mat-error *ngIf="registerForm.get('userId')?.errors">{{getErrorMessage("userId")}}</mat-error>
                </mat-form-field>

                <mat-form-field class="form__field" appearance="standard">
                    <mat-label>Enter user first name</mat-label>
                    <input matInput formControlName="fName" required>
                    <mat-error *ngIf="registerForm.get('fName')?.errors">{{getErrorMessage("fName")}}</mat-error>
                </mat-form-field>

                <mat-form-field class="form__field" appearance="standard">
                    <mat-label>Enter user last name</mat-label>
                    <input matInput formControlName="lName" required>
                    <mat-error *ngIf="registerForm.get('lName')?.errors">{{getErrorMessage("lName")}}</mat-error>
                </mat-form-field>

                <mat-form-field class="form__field" appearance="standard">
                    <mat-label>Enter user phone number</mat-label>
                    <input matInput type="tel" formControlName="tel" required>
                    <mat-icon class="input-icon" matSuffix>phone</mat-icon>
                    <mat-hint>052-1234567</mat-hint>
                    <mat-error *ngIf="registerForm.get('tel')?.errors">{{getErrorMessage("tel")}}</mat-error>
                </mat-form-field>

                <div class="role">
                    <mat-label class="role__label">Role: </mat-label>
                    <mat-radio-group class="role__radio-buttons-group" formControlName="role">
                        <mat-radio-button color="primary" class="role__radio-button" *ngFor="let role of roles"
                            [value]="role">{{ role }}
                        </mat-radio-button>
                    </mat-radio-group>
                    <mat-error *ngIf="roleError">
                        required
                    </mat-error>
                </div>

                <mat-form-field class="form__field" appearance="standard">
                    <mat-label>Enter your email</mat-label>
                    <input matInput placeholder="pat@example.com" formControlName="email" required>
                    <mat-icon class="input-icon" matSuffix>mail</mat-icon>
                    <mat-error *ngIf="registerForm.get('email')?.errors">{{getErrorMessage('email')}}</mat-error>
                </mat-form-field>

                <mat-form-field class="form__field">
                    <mat-label>Enter your password</mat-label>
                    <input matInput type="text" formControlName="password" #userPassword minlength="6"
                        [type]="hide ? 'password' : 'text'">
                    <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                        [attr.aria-pressed]="hide">
                        <mat-icon class="input-icon" style="margin-bottom: 0.5rem">{{ hide ? 'visibility_off' :
                            'visibility'
                            }}</mat-icon>
                    </button>
                    <mat-hint style="color:#333" align="end">{{ userPassword.value?.length }} / 6</mat-hint>
                    <mat-error *ngIf="registerForm.get('password')?.errors">
                        {{getErrorMessage('password')}}
                    </mat-error>

                </mat-form-field>
            </form>
            <mat-action-row>
                <button mat-button color="primary" [disabled]="registerForm.invalid" (click)="nextStep()">Next</button>
            </mat-action-row>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="step === 1" [disabled]="registerForm.invalid" (opened)="setStep(1)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Address
                </mat-panel-title>
                <mat-panel-description>
                    Type the address information
                    <mat-icon>map</mat-icon>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <form [formGroup]="addressForm">
                <ng-template matStepLabel>Fill out your address</ng-template>
                <mat-form-field class="form__field">
                    <mat-label>City:</mat-label>
                    <input matInput formControlName="city" required>
                    <mat-error *ngIf="addressForm.get('city')?.errors">{{getErrorMessage("city")}}</mat-error>
                </mat-form-field>

                <mat-form-field class="form__field">
                    <mat-label>Street:</mat-label>
                    <input matInput formControlName="street" required>
                    <mat-error *ngIf="addressForm.get('street')?.errors">{{getErrorMessage("street")}}</mat-error>
                </mat-form-field>

                <mat-form-field class="form__field">
                    <mat-label>House number:</mat-label>
                    <input matInput type="number" formControlName="house" required>
                    <mat-error *ngIf="addressForm.get('house')?.errors">{{getErrorMessage("house")}}</mat-error>
                </mat-form-field>

                <mat-form-field class="form__field">
                    <mat-label>ZipCode:</mat-label>
                    <input matInput type="number" formControlName="zipCode" required>
                    <mat-error *ngIf="addressForm.get('zipCode')?.errors">{{getErrorMessage("zipCode")}}</mat-error>
                </mat-form-field>

            </form>
            <mat-action-row>
                <button mat-button color="warn" (click)="prevStep()">Back</button>
                <button mat-button matStepperNext [disabled]="addressForm.invalid"
                    (click)="setUserAddress()">Next</button>
            </mat-action-row>

        </mat-expansion-panel>
        <mat-expansion-panel [expanded]="step === 2" [disabled]="registerForm.invalid" (opened)="setStep(2)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Confirm
                </mat-panel-title>
                <mat-panel-description>
                    Confirm And Register
                    <mat-icon>date_range</mat-icon>
                </mat-panel-description>
            </mat-expansion-panel-header>
            <mat-action-row>
                <button mat-button color="warn" (click)="prevStep()">Previous</button>
                <button class="btn" [disabled]="registerForm.invalid" (click)="add()">
                    Add User
                </button>
            </mat-action-row>
        </mat-expansion-panel>
    </mat-accordion>

</div>