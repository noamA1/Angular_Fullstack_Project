<!-- <div class="example-input-wrapper">
    <label for="duration">Animation duration:</label>
    <input id="duration" value="2000" type="number" min="0" step="100" #duration>
  </div> -->

<mat-vertical-stepper [linear]="true" #stepper>
    <mat-step state="phone">

        <form [formGroup]="firstFormGroup">
            <ng-template matStepLabel>Order Summary</ng-template>
            <mat-list role="list">
                <div *ngFor=" let displayProduct of orderProducts">
                    <app-order-item [displayItem]="displayProduct"></app-order-item>
                </div>
            </mat-list>
            Total Price: {{orderTotalPrice}}
            <div>
                <button mat-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="addressForm">
        <form [formGroup]="addressForm">
            <ng-template matStepLabel>Fill out your address</ng-template>
            <mat-form-field>
                <mat-label>City:</mat-label>
                <input matInput formControlName="city" required>
                <mat-error *ngIf="addressForm.get('city')?.errors">{{getErrorMessage("city")}}</mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Street:</mat-label>
                <input matInput formControlName="street" required>
                <mat-error *ngIf="addressForm.get('street')?.errors">{{getErrorMessage("street")}}</mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>House number:</mat-label>
                <input matInput type="number" formControlName="house" required>
                <mat-error *ngIf="addressForm.get('house')?.errors">{{getErrorMessage("house")}}</mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>ZipCode:</mat-label>
                <input matInput type="number" formControlName="zipCode" required>
                <mat-error *ngIf="addressForm.get('zipCode')?.errors">{{getErrorMessage("zipCode")}}</mat-error>
            </mat-form-field>
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button matStepperNext [disabled]="addressForm.invalid"
                    (click)="setOrderAddress()">Next</button>
            </div>
        </form>
    </mat-step>
    <mat-step>
        <ng-template matStepLabel>Choose shipping date</ng-template>
        <mat-form-field color="primary" appearance="standard">
            <mat-label>Shipping date</mat-label>
            <input matInput [matDatepicker]="picker2" [min]="minDate" (dateInput)="selectedDate( $event)"
                [readonly]="true">
            <mat-datepicker-toggle matSuffix [for]="picker2" [disabled]="false">
            </mat-datepicker-toggle>
            <mat-datepicker #picker2 color="primary" [disabled]="false"></mat-datepicker>
        </mat-form-field>
        <mat-error *ngIf="deliveryDateError">The date you selected is full, please select another date</mat-error>
        <div>
            <button mat-button matStepperNext [disabled]="deliveryDateError || !selectedShippingDate">Next</button>
            <button mat-button matStepperPrevious>Back</button>
        </div>
    </mat-step>
    <mat-step [stepControl]="paymentForm">
        <form [formGroup]="paymentForm">
            <ng-template matStepLabel>Payment</ng-template>
            <div class="credit-cards-images">
                <img [ngClass]="{'image__border image__scale': credit.value.startsWith('4')}"
                    src="../../../../assets/general-images/Visa-logo.png" class="image__credit-card">
                <img [ngClass]="{'image__border image__scale': credit.value.startsWith('5')}"
                    src="../../../../assets/general-images/Mastercard-logo.png" class="image__credit-card">
                <img [ngClass]="{'image__border image__scale': credit.value.startsWith('3')}"
                    src="../../../../assets/general-images/american-express-logo.png" class="image__credit-card">
                <img [ngClass]="{'image__border image__scale': credit.value.startsWith('6')}"
                    src="../../../../assets/general-images/discover-logo.png" class="image__credit-card">
            </div>
            <mat-form-field>
                <mat-label>Card number:</mat-label>
                <input matInput #credit type="text" appCreditCard formControlName="cardNumber" required>
                <mat-error *ngIf="paymentForm.get('cardNumber')?.errors">{{getErrorMessage("cardNumber")}}</mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Expiration Date:</mat-label>
                <input matInput type="text" appExpirationDate formControlName="valid" required>
                <mat-error *ngIf="paymentForm.get('valid')?.errors">{{getErrorMessage("valid")}}</mat-error>
                <!-- <mat-error *ngIf="!paymentForm.get('valid')?.errors?.['validateInput']">
                    Please enter a vaild expiration date</mat-error> -->
            </mat-form-field>
            <mat-form-field>
                <mat-label>cvv:</mat-label>
                <input matInput type="number" formControlName="cvv" required>
                <mat-error *ngIf="paymentForm.get('cvv')?.errors">{{getErrorMessage("cvv")}}</mat-error>
            </mat-form-field>
            <div>
                <!-- [disabled]="paymentForm.invalid" -->
                <button mat-button matStepperNext (click)="setOrderPayment()">Next</button>
                <button mat-button matStepperPrevious>Back</button>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="paymentForm">
        <form [formGroup]="paymentForm">
            <ng-template matStepLabel>Confirm</ng-template>
            <h1>
                Last chance to change order details.
            </h1>
            <h5>After clicking on the confirmation you will not be able to change the order</h5>
            <button mat-flat-button color="primary" (click)="submit()">Confirm</button>
            <div>
                <!-- [disabled]="paymentForm.invalid" -->

                <button mat-button matStepperPrevious>Back</button>
            </div>
        </form>
    </mat-step>
    <ng-template matStepperIcon="phone">
        <mat-icon>call_end</mat-icon>
    </ng-template>
</mat-vertical-stepper>